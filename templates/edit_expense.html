{% extends 'base.html' %}
{% block title %}Edit Expense Record{% endblock %}

{% block content %}
<h2>Edit Expense Record</h2>
<form method="POST">
    <label for="date">Expense Date:</label>
    <input type="date" id="date" name="date" required value="{{ request.form.date if request.form.date else expense.date.strftime('%Y-%m-%d') }}">

    <label for="category">Category:</label>
    <select id="category" name="category" required>
        <option value="">-- Select Category --</option>
        <option value="Feed" {% if (request.form.category or expense.category) == 'Feed' %}selected{% endif %}>Feed</option>
        <option value="Veterinary" {% if (request.form.category or expense.category) == 'Veterinary' %}selected{% endif %}>Veterinary Services</option>
        <option value="Labor" {% if (request.form.category or expense.category) == 'Labor' %}selected{% endif %}>Labor/Wages</option>
        <option value="Maintenance" {% if (request.form.category or expense.category) == 'Maintenance' %}selected{% endif %}>Equipment Maintenance</option>
        <option value="Utilities" {% if (request.form.category or expense.category) == 'Utilities' %}selected{% endif %}>Utilities (Water, Electricity)</option>
        <option value="Fuel" {% if (request.form.category or expense.category) == 'Fuel' %}selected{% endif %}>Fuel</option>
        <option value="Supplies" {% if (request.form.category or expense.category) == 'Supplies' %}selected{% endif %}>Farm Supplies</option>
        <option value="Other" {% if (request.form.category or expense.category) == 'Other' %}selected{% endif %}>Other</option>
    </select>

    <label for="amount">Amount (RWF):</label>
    <input type="number" id="amount" name="amount" step="0.01" min="0" required value="{{ request.form.amount if request.form.amount else '%.2f'|format(expense.amount) }}">

    <label for="description">Description (Optional):</label>
    <textarea id="description" name="description" rows="3">{{ request.form.description if request.form.description else expense.description if expense.description else '' }}</textarea>

    <button type="submit">Update Expense</button>
</form>
{% endblock %}
