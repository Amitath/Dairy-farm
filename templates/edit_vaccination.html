{% extends 'base.html' %}
{% block title %}Edit Vaccination Record{% endblock %}

{% block content %}
<h2>Edit Vaccination Record</h2>
<form method="POST">
    <label for="cow_id">Select Cow:</label>
    <select id="cow_id" name="cow_id" required>
        <option value="">-- Select a Cow --</option>
        {% for cow_option in cows %}
            <option value="{{ cow_option.id }}" {% if (request.form.cow_id and request.form.cow_id|int == cow_option.id) or (vac.cow_id == cow_option.id and not request.form.cow_id) %}selected{% endif %}>
                {{ cow_option.name }} ({{ cow_option.cow_id }})
            </option>
        {% endfor %}
    </select>

    <label for="vaccine_name">Vaccine Name:</label>
    <input type="text" id="vaccine_name" name="vaccine_name" required value="{{ request.form.vaccine_name if request.form.vaccine_name else vac.vaccine_name }}">

    <label for="vaccination_date">Vaccination Date:</label>
    <input type="date" id="vaccination_date" name="vaccination_date" required value="{{ request.form.vaccination_date if request.form.vaccination_date else vac.vaccination_date.strftime('%Y-%m-%d') }}">

    <label for="next_due_date">Next Due Date (Optional):</label>
    <input type="date" id="next_due_date" name="next_due_date" value="{{ request.form.next_due_date if request.form.next_due_date else (vac.next_due_date.strftime('%Y-%m-%d') if vac.next_due_date else '') }}">

    <label for="status">Status:</label>
    <select id="status" name="status">
        <option value="Due" {% if (request.form.status or vac.status) == 'Due' %}selected{% endif %}>Due</option>
        <option value="Completed" {% if (request.form.status or vac.status) == 'Completed' %}selected{% endif %}>Completed</option>
        <option value="Overdue" {% if (request.form.status or vac.status) == 'Overdue' %}selected{% endif %}>Overdue</option>
    </select>

    <label for="notes">Notes (Optional):</label>
    <textarea id="notes" name="notes" rows="3">{{ request.form.notes if request.form.notes else vac.notes if vac.notes else '' }}</textarea>

    <button type="submit">Update Vaccination</button>
</form>
{% endblock %}
